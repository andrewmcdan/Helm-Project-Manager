<!--
This page displays the user's profile information and allows them to update their details.
-->
<section class="page">
    <header class="page-header">
        <h1>User Profile</h1>
        <p class="meta">View and update your profile information.</p>
    </header>
    <div class="grid">
        <div class="card stack">
            <h2>Profile Image</h2>
            <div class="profile-image-container">
                <img data-profile-user-icon alt="Profile image" />
            </div>
            <p class="meta">Use the "Personal Information" form to change your profile image.</p>
        </div>
        <div class="card stack">
            <h2>Personal Information</h2>
            <p class="meta">Your role: <strong><%= user.role %></strong></p>
            <form id="profile-form" class="stack">
                <label for="first_name">First Name:</label>
                <input type="text" id="first_name" name="first_name" value="<%= user.first_name %>" required />

                <label for="last_name">Last Name:</label>
                <input type="text" id="last_name" name="last_name" value="<%= user.last_name %>" required />

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" value="<%= user.email %>" required />

                <label for="address">Address:</label>
                <input type="text" id="address" name="address" value="<%= user.address %>" />

                <label for="profile_image">Profile Image:</label>
                <input type="file" id="profile_image" name="profile_image" accept="image/*" />

                <button type="submit">Update Profile</button>
            </form>
        </div>
        <div class="card stack">
            <h2>Change Password</h2>
            <p class="meta">Password expires on: <%= user.password_expires_at ? user.password_expires_at.toDateString() : 'N/A' %></p>
            <form id="change-password-form" class="stack">
                <label for="current_password">Current Password:</label>
                <input type="password" id="current_password" name="current_password" required />

                <label for="new_password">New Password:</label>
                <input type="password" id="new_password" name="new_password" required />

                <label for="confirm_new_password">Confirm New Password:</label>
                <input type="password" id="confirm_new_password" name="confirm_new_password" required />

                <button type="submit">Change Password</button>
            </form>
        </div>
        <div class="card stack">
            <h2>Security Questions</h2>
            <form id="security-questions-form" class="stack">
                <div class="field">
                    <label for="security_question_1">Security Question 1</label>
                    <select id="security_question_1" name="security_question_1" required>
                        <option value="" disabled selected>Select a security question</option>
                    </select>
                </div>
                <div class="field">
                    <label for="security_answer_1">Security Answer 1</label>
                    <input id="security_answer_1" name="security_answer_1" type="text" required />
                </div>
                <div class="field">
                    <label for="security_question_2">Security Question 2</label>
                    <select id="security_question_2" name="security_question_2" required>
                        <option value="" disabled selected>Select a security question</option>
                    </select>
                </div>
                <div class="field">
                    <label for="security_answer_2">Security Answer 2</label>
                    <input id="security_answer_2" name="security_answer_2" type="text" required />
                </div>
                <div class="field">
                    <label for="security_question_3">Security Question 3</label>
                    <select id="security_question_3" name="security_question_3" required>
                        <option value="" disabled selected>Select a security question</option>
                    </select>
                </div>
                <div class="field">
                    <label for="security_answer_3">Security Answer 3</label>
                    <input id="security_answer_3" name="security_answer_3" type="text" required />
                </div>

                <label for="security_current_password">Current Password:</label>
                <input type="password" id="security_current_password" name="current_password" required />

                <button type="submit">Update Security Questions</button>
            </form>
        </div>
    </div>
</section>
